/**
 * @license almond 0.3.2 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

!function(){var t;!function(){if(!t||!t.requirejs){t?n=t:t={};var e,n,r;!function(t){function i(t,e){return b.call(t,e)}function o(t,e){var n,r,i,o,a,s,u,c,d,l,f,p,h=e&&e.split("/"),g=_.map,m=g&&g["*"]||{};if(t){for(t=t.split("/"),a=t.length-1,_.nodeIdCompat&&A.test(t[a])&&(t[a]=t[a].replace(A,"")),"."===t[0].charAt(0)&&h&&(p=h.slice(0,h.length-1),t=p.concat(t)),d=0;d<t.length;d++)if(f=t[d],"."===f)t.splice(d,1),d-=1;else if(".."===f){if(0===d||1===d&&".."===t[2]||".."===t[d-1])continue;d>0&&(t.splice(d-1,2),d-=2)}t=t.join("/")}if((h||m)&&g){for(n=t.split("/"),d=n.length;d>0;d-=1){if(r=n.slice(0,d).join("/"),h)for(l=h.length;l>0;l-=1)if(i=g[h.slice(0,l).join("/")],i&&(i=i[r])){o=i,s=d;break}if(o)break;!u&&m&&m[r]&&(u=m[r],c=d)}!o&&u&&(o=u,s=c),o&&(n.splice(0,s,o),t=n.join("/"))}return t}function a(e,n){return function(){var r=w.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),p.apply(t,r.concat([e,n]))}}function s(t){return function(e){return o(e,t)}}function u(t){return function(e){m[t]=e}}function c(e){if(i(y,e)){var n=y[e];delete y[e],v[e]=!0,f.apply(t,n)}if(!i(m,e)&&!i(v,e))throw new Error("No "+e);return m[e]}function d(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function l(t){return function(){return _&&_.config&&_.config[t]||{}}}var f,p,h,g,m={},y={},_={},v={},b=Object.prototype.hasOwnProperty,w=[].slice,A=/\.js$/;h=function(t,e){var n,r=d(t),i=r[0];return t=r[1],i&&(i=o(i,e),n=c(i)),i?t=n&&n.normalize?n.normalize(t,s(e)):o(t,e):(t=o(t,e),r=d(t),i=r[0],t=r[1],i&&(n=c(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:n}},g={require:function(t){return a(t)},exports:function(t){var e=m[t];return"undefined"!=typeof e?e:m[t]={}},module:function(t){return{id:t,uri:"",exports:m[t],config:l(t)}}},f=function(e,n,r,o){var s,d,l,f,p,_,b=[],w=typeof r;if(o=o||e,"undefined"===w||"function"===w){for(n=!n.length&&r.length?["require","exports","module"]:n,p=0;p<n.length;p+=1)if(f=h(n[p],o),d=f.f,"require"===d)b[p]=g.require(e);else if("exports"===d)b[p]=g.exports(e),_=!0;else if("module"===d)s=b[p]=g.module(e);else if(i(m,d)||i(y,d)||i(v,d))b[p]=c(d);else{if(!f.p)throw new Error(e+" missing "+d);f.p.load(f.n,a(o,!0),u(d),{}),b[p]=m[d]}l=r?r.apply(m[e],b):void 0,e&&(s&&s.exports!==t&&s.exports!==m[e]?m[e]=s.exports:l===t&&_||(m[e]=l))}else e&&(m[e]=r)},e=n=p=function(e,n,r,i,o){if("string"==typeof e)return g[e]?g[e](n):c(h(e,n).f);if(!e.splice){if(_=e,_.deps&&p(_.deps,_.callback),!n)return;n.splice?(e=n,n=r,r=null):e=t}return n=n||function(){},"function"==typeof r&&(r=i,i=o),i?f(t,e,n,r):setTimeout(function(){f(t,e,n,r)},4),p},p.config=function(t){return p(t)},e._defined=m,r=function(t,e,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(n=e,e=[]),i(m,t)||i(y,t)||(y[t]=[t,e,n])},r.amd={jQuery:!0}}(),t.requirejs=e,t.require=n,t.define=r}}(),t.define("vendor/almond",function(){}),!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return y.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(y.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(y.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(y.arrayBuffer&&y.blob&&v(t))this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return w.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var n=e.body;if("string"==typeof t)this.url=t;else{if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function g(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function m(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var y={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(y.arrayBuffer)var _=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&_.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype["delete"]=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},y.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},l.call(p.prototype),l.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var A=[301,302,303,307,308];m.redirect=function(t,e){if(-1===A.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=p,t.Response=m,t.fetch=function(t,e){return new Promise(function(n,r){var i=new p(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:g(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new m(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&y.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),t.define("vendor/fetch",function(){}),!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t.define&&t.define.amd?t.define("vendor/es6Promise",n):e.ES6Promise=n()}(this,function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function e(t){return"function"==typeof t}function n(t){F=t}function r(t){G=t}function i(){return function(){return process.nextTick(c)}}function o(){return"undefined"!=typeof W?function(){W(c)}:u()}function a(){var t=0,e=new z(c),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function s(){var t=new MessageChannel;return t.port1.onmessage=c,function(){return t.port2.postMessage(0)}}function u(){var t=setTimeout;return function(){return t(c,1)}}function c(){for(var t=0;L>t;t+=2){var e=Q[t],n=Q[t+1];e(n),Q[t]=void 0,Q[t+1]=void 0}L=0}function d(){try{var t=Function("return this")().require("vertx");return W=t.runOnLoop||t.runOnContext,o()}catch(e){return u()}}function l(t,e){var n=this,r=new this.constructor(p);void 0===r[X]&&j(r);var i=n._state;if(i){var o=arguments[i-1];G(function(){return C(i,r,o,n._result)})}else E(n,r,t,e);return r}function f(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(p);return w(n,t),n}function p(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function m(t){try{return t.then}catch(e){return nt.error=e,nt}}function y(t,e,n,r){try{t.call(e,n,r)}catch(i){return i}}function _(t,e,n){G(function(t){var r=!1,i=y(n,e,function(n){r||(r=!0,e!==n?w(t,n):x(t,n))},function(e){r||(r=!0,S(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,S(t,i))},t)}function v(t,e){e._state===tt?x(t,e._result):e._state===et?S(t,e._result):E(e,void 0,function(e){return w(t,e)},function(e){return S(t,e)})}function b(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===f?v(t,n):r===nt?(S(t,nt.error),nt.error=null):void 0===r?x(t,n):e(r)?_(t,n,r):x(t,n)}function w(e,n){e===n?S(e,h()):t(n)?b(e,n,m(n)):x(e,n)}function A(t){t._onerror&&t._onerror(t._result),T(t)}function x(t,e){t._state===Z&&(t._result=e,t._state=tt,0!==t._subscribers.length&&G(T,t))}function S(t,e){t._state===Z&&(t._state=et,t._result=e,G(A,t))}function E(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+tt]=n,i[o+et]=r,0===o&&t._state&&G(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,a=0;a<e.length;a+=3)r=e[a],i=e[a+n],r?C(n,r,i,o):i(o);t._subscribers.length=0}}function P(t,e){try{return t(e)}catch(n){return nt.error=n,nt}}function C(t,n,r,i){var o=e(r),a=void 0,s=void 0,u=void 0,c=void 0;if(o){if(a=P(r,i),a===nt?(c=!0,s=a.error,a.error=null):u=!0,n===a)return void S(n,g())}else a=i,u=!0;n._state!==Z||(o&&u?w(n,a):c?S(n,s):t===tt?x(n,a):t===et&&S(n,a))}function k(t,e){try{e(function(e){w(t,e)},function(e){S(t,e)})}catch(n){S(t,n)}}function B(){return rt++}function j(t){t[X]=rt++,t._state=void 0,t._result=void 0,t._subscribers=[]}function O(){return new Error("Array Methods must be provided an Array")}function M(t){return new it(this,t).promise}function D(t){var e=this;return new e(N(t)?function(n,r){for(var i=t.length,o=0;i>o;o++)e.resolve(t[o]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function U(t){var e=this,n=new e(p);return S(n,t),n}function q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function $(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function I(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}t.Promise=ot}var R=void 0;R=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var N=R,L=0,W=void 0,F=void 0,G=function(t,e){Q[L]=t,Q[L+1]=e,L+=2,2===L&&(F?F(c):V())},H="undefined"!=typeof window?window:void 0,Y=H||{},z=Y.MutationObserver||Y.WebKitMutationObserver,J="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),K="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Q=new Array(1e3),V=void 0;V=J?i():z?a():K?s():void 0===H&&"function"==typeof require?d():u();var X=Math.random().toString(36).substring(2),Z=void 0,tt=1,et=2,nt={error:null},rt=0,it=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[X]||j(this.promise),N(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&x(this.promise,this._result))):S(this.promise,O())}return t.prototype._enumerate=function(t){for(var e=0;this._state===Z&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===f){var i=m(t);if(i===l&&t._state!==Z)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===ot){var o=new n(p);b(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===Z&&(this._remaining--,t===et?S(r,n):this._result[e]=n),0===this._remaining&&x(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(tt,e,t)},function(t){return n._settledAt(et,e,t)})},t}(),ot=function(){function t(e){this[X]=B(),this._result=this._state=void 0,this._subscribers=[],p!==e&&("function"!=typeof e&&q(),this instanceof t?k(this,e):$())}return t.prototype["catch"]=function(t){return this.then(null,t)},t.prototype["finally"]=function(t){var e=this,n=e.constructor;return e.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})},t}();return ot.prototype.then=l,ot.all=M,ot.race=D,ot.resolve=f,ot.reject=U,ot._setScheduler=n,ot._setAsap=r,ot._asap=G,ot.polyfill=I,ot.Promise=ot,ot.polyfill(),ot}),t.define("core",["vendor/fetch","vendor/es6Promise"],function(){function t(){window.addEventListener("message",function(t){if("https://assets.publicgood.com"===t.origin){var e=t.data.type;if(-1!==b.whitelistedWidgets.indexOf(e)){var n=b.widget[e].cssClass,r=t.data.action,i=t.data.actionData||{};if(e)switch(r){case"setDimensions":if(i.height||i.width){for(var o=document.querySelectorAll("."+n+" iframe"),a=0;a<o.length;a++)if(o[a].contentWindow===t.source){"true"===o[a].parentNode.getAttribute("widget-loading")&&(o[a].parentNode.setAttribute("widget-loading",!1),g(o[a].parentNode)),i.height&&(o[a].style.height=_(i.height)?i.height+"px":i.height),i.width&&("100%"===window.getComputedStyle(o[0]).width?o[a].style.width="auto":o[a].style.width=_(i.width)?i.width+"px":i.width);break}_(i.height)&&v(i.height,Math.max(document.body.scrollWidth,document.body.offsetWidth,document.body.clientWidth))}break;case"getSeenStatus":for(var o=document.querySelectorAll("."+n+" iframe"),a=0;a<o.length;a++)o[a].contentWindow===t.source&&o[a].parentNode.getAttribute("data-seen")&&o[a].contentWindow.postMessage({pgmSeen:!0},"*");break;case"getWidgetData":for(var o=document.querySelectorAll("."+n+" iframe"),a=0;a<o.length;a++)if(o[a].contentWindow===t.source){o[a].contentWindow.postMessage({widgetData:x[o[a].parentNode.getAttribute("data-widget-index")]},"*");break}break;default:console.log("undefined message")}}}},!1)}function e(t,e){try{t||(t=document);var r,i,s,u,c,d,l="data-pgs",f=[];if(e)f.push("."+b.widget[e].cssClass+":not([data-loaded])");else for(var p in b.widget)if(b.widget.hasOwnProperty(p)&&(f.push("."+b.widget[p].cssClass+":not([data-loaded])"),b.widget[p].altClasses))for(var g,m,_=0,v=b.widget[p].altClasses.length;v>_;_++)for(m=b.widget[p].altClasses[_],g=t.querySelectorAll("."+m+":not([data-loaded])"),w=0;w<g.length;w++)g[_].classList.add(b.widget[p].cssClass),g[_].classList.remove(m);r=t.querySelectorAll(f.join(", ")+":not([data-loaded])");for(var w=0,A=r.length;A>w;w++){var x=n(r[w].className);h(r[w]),i=r[w].attributes,s=b.widgetUrl,c="",u={},d="",r[w].setAttribute("data-loaded",!0),r[w].setAttribute("widget-loading",!0);for(var S,E,T,_=0,v=i.length;v>_;_++)S=i[_].name,E=encodeURIComponent(i[_].value),-1!==S.indexOf(l)&&(T=S.slice(9).replace("-","_"),u[T]=E,"data-pgs-url"===S&&(c=encodeURIComponent(i[_].value)),"data-pgs-partner-id"===S&&(d=i[_].value,u.utm_campaign="PGM",u.utm_medium=x,u.utm_source=d));u.title=encodeURIComponent(y()),c||(c=encodeURIComponent(location)),u.url=c,u.utm_content=c,u.widget_type=x,a(r[w],s,u,x,c)}}catch(P){o("Error during load",P)}}function n(t){for(var e in b.widget)if(b.widget.hasOwnProperty(e)&&t.indexOf(b.widget[e].cssClass)>=0)return b.widget[e].medium}function r(t,e,n,r){var o=t.content||{},a=(t.partner&&t.partner.attrs?t.partner.attrs:null)||{};e.action=t.action,o.partner_id&&(e.utm_source=o.partner_id,e.partner_id=o.partner_id),"flex"===e.widget_type&&(o.widget_type?(e.widget_type=o.widget_type,e.utm_medium=o.widget_type):(e.widget_type="button",e.utm_medium="button"),e.is_flex="true",r.className=b.widget[e.widget_type].cssClass),e.target_id&&e.target_type&&""!=e.target_id&&""!=e.target_type?e.match_type="manual":(e.match_type="auto",e.target_id&&delete e.target_id,e.target_type&&delete e.target_type),o.target_name&&(e.target_name=encodeURIComponent(o.target_name));for(i in o)e[i]||(e[i]=encodeURIComponent(o[i]));for(i in a)e[i]||(e[i]=encodeURIComponent(a[i]));return e}function o(t,e){console.log("PGMErr: "+t)}function a(t,e,n,r,i){var o=t.getAttribute("data-pgs-target-id")?!0:!1,a=JSON.parse(JSON.stringify(n));s(t,a,r,i,o).then(function(n){n&&!n.hide&&f(t,e,n.qs,b.widget[r].defaultDimensions.width,b.widget[r].defaultDimensions.height,r)})}function s(t,e,n,i,o){return u(e,i).then(function(t){return t.json()}).then(function(n){var i=n&&n.data&&n.data.getAdvice?n.data.getAdvice:null;return i&&"Hide"!==i.action&&"Fallback"!==i.action?(e=r(i,e,t.hasAttribute("data-pgs-descriptor")?t.getAttribute("data-pgs-descriptor"):null,t),l(e.target_type,e.target_id,e.partner_id,i.content.content_id).then(function(t){return t.ok?t.json():{}}).then(function(n){var r=n&&n.data&&n.data.getPGMData?n.data.getPGMData:{};if("campaign"===e.target_type)r.type="campaign",e.target_name=r.campaign.name,e.is_sponsored=r.campaignMembers.sponsor&&r.campaignMembers.sponsor.guid?"true":"false",e.sponsor_name=r.campaignMembers.sponsor&&r.campaignMembers.sponsor.name?r.campaignMembers.sponsor.name:"";else{if("takeaction"!==e.target_type&&"cause"!==e.target_type&&"tag"!==e.target_type)return g(t),{hide:!0,qs:null};r.type="tag",e.target_name=r.tag.value}return t.setAttribute("data-widget-index",x.length),x.push(r),{hide:!1,qs:e}})["catch"](function(e){g(t),console.log(e)})):(g(t),{hide:!0,qs:null})})["catch"](function(e){g(t),console.log(e)})}function u(t,e){var n={query:"query getAdvice($url:String, $partner_id:String, $target_type:String, $target_id: String) {         getAdvice(url: $url, partner_id: $partner_id, target_type: $target_type, target_id: $target_id) {           action           content {             content_id             partner_id             title             hide             target_id             target_type             widget_type             qa_verified             is_override             is_pre_filter             is_post_filter             widgets_start_as_buttons           }           url         }       }",variables:{url:e,partner_id:t.partner_id,target_id:t.target_id,target_type:t.target_type},operationName:"getAdvice"},r={method:"POST",mode:"cors",headers:{"x-api-key":"da2-e3ivov6k7fcg7eyqc4btdhhq5u","Content-Type":"application/graphql"},body:JSON.stringify(n)};return fetch(b.adviceUrl,r)}function c(t,e,n){return{query:"query getPGMData($target_id:String, $partner_id:String, $content_id:Int, $environment: String) {         getPGMData {           campaign(target_id: $target_id)"+A.campaignSchema+"campaignMembers(target_id: $target_id) {             originator"+A.orgSchema+"sponsor"+A.orgSchema+"beneficiaries"+A.orgSchema+"}           partner(partner_id: $partner_id)"+A.orgSchema+"config(environment: $environment) {             emoji             gaExperiments           }           readMore(content_id: $content_id, partner_id: $partner_id, environment: $environment) {             URL             snippet             title           }         }       }",variables:{target_id:t,partner_id:e,content_id:n||0,environment:"production"},operationName:"getPGMData"}}function d(t,e,n,r){return{query:"query getPGMData($target_id:String, $partner_id:String, $content_id:Int, $environment: String, $location: String) {         getPGMData {           tag(target_id: $target_id)"+A.tagSchema+"tagBeneficiaries(target_id: $target_id, location: $location)"+A.orgSchema+"partner(partner_id: $partner_id)"+A.orgSchema+"config(environment: $environment) {             emoji             gaExperiments           }           readMore(content_id: $content_id, partner_id: $partner_id, environment: $environment) {             URL             snippet             title           }         }       }",variables:{target_id:t,partner_id:e,content_id:n||0,environment:"production",location:r||""},operationName:"getPGMData"}}function l(t,e,n,r){var i,o={};if("campaign"===t)i=c(e,n,r);else{if("takeaction"!==t&&"tag"!==t)return Promise.resolve({});i=d(e,n,r)}return o={method:"POST",mode:"cors",headers:{"x-api-key":"da2-e3ivov6k7fcg7eyqc4btdhhq5u","Content-Type":"application/graphql"},body:JSON.stringify(i)},fetch(b.adviceUrl,o)}function f(t,e,n,r,i,o){var a=document.createElement("iframe");"auto"===r&&(r="100%"),e+="?"+p(n),a.setAttribute("src",e),a.setAttribute("width","0"),a.setAttribute("height","0"),a.setAttribute("frameborder","0"),a.setAttribute("marginheight","0"),a.setAttribute("marginwidth","0"),a.setAttribute("scrolling","no"),a.style.transition="height 0.4s ease-out",t.appendChild(a),a.onload=function(){a.setAttribute("width",r),"true"===t.getAttribute("data-seen")&&a.contentWindow.postMessage({pgmSeen:!0},b.widget[o].url)},window.setTimeout(function(){m(t)||window.addEventListener("scroll",function e(n){m(t,b.widget[o].url)&&window.removeEventListener("scroll",e)})},1e3)}function p(t){var e=[];for(var n in t)e.push(n+"="+t[n]);return e.join("&")}function h(t){t.innerHTML="";var e=document.createElement("style");e.innerHTML=b.spinnerCSS,t.appendChild(e);var n=document.createElement("div");n.id="pgs",n.style.maxWidth="100px",n.innerHTML=b.spinnerTemplate,t.appendChild(n)}function g(t){t.removeChild(t.querySelector("style")),t.removeChild(t.querySelector("div#pgs"))}function m(t){var e=t.getBoundingClientRect(),n=e.height>50?40:10,r=e.top>=0&&e.bottom-n<=window.innerHeight,i=t.querySelector("iframe");return r&&"true"!==t.getAttribute("data-seen")&&(t.setAttribute("data-seen",!0),i&&i.contentWindow&&i.contentWindow.postMessage({pgmSeen:!0},"*")),r}function y(){for(var t=document.getElementsByTagName("meta"),e=0;e<t.length;e++)if("og:title"==t[e].getAttribute("property"))return t[e].getAttribute("content");var n=document.getElementsByTagName("h1");return n.length>0?document.getElementsByTagName("h1")[0].innerText:""}function _(t){return!isNaN(t)&&parseInt(Number(t))==t&&!isNaN(parseInt(t,10))}function v(t,e){try{window.parent.postMessage({sentinel:"amp",type:"embed-size",height:t,width:e},"*")}catch(n){}}var b={widgetUrl:"https://assets.publicgood.com/ex/v2/index.html",widget:{button:{cssClass:"pgs-dpg-btn",url:"https://assets.publicgood.com/ex/v2/",medium:"button",defaultDimensions:{width:"100%",height:"115"}},chat:{cssClass:"pgs-dpg-chat",altClasses:["pgs-dpg-ex"],url:"https://assets.publicgood.com/ex/v2/",medium:"chat",defaultDimensions:{width:"100%",height:"115"}},card:{cssClass:"pgs-dpg-card",url:"https://assets.publicgood.com/ex/v2/",medium:"card",defaultDimensions:{width:"100%",height:"115"}},flex:{cssClass:"pgs-dpg-flex",url:"https://assets.publicgood.com/ex/v2/",medium:"flex",defaultDimensions:{width:"100%",height:"115"}}},whitelistedParams:["location","variant","url","target-type","target-id","partner-id","align","descriptor","action-id"],whitelistedWidgets:["button","card","chat","flex"],spinnerCSS:"#pgs .spinnerWrapper { padding: 5px 0; text-align: center; }                  #pgs .spinner { background-color: #fff; padding: 5px; margin: 20px auto; width: 50px; height: 40px; text-align: center; font-size: 10px;}                  #pgs .spinner > div { background-color: #5a6a79; padding: 0; margin: 0 1px; height: 100%; width: 6px; display: inline-block; -webkit-animation: sk-stretchdelay 1.2s infinite ease-in-out; animation: sk-stretchdelay 1.2s infinite ease-in-out; }                  #pgs .spinner .rect2 { -webkit-animation-delay: -1.1s; animation-delay: -1.1s; }                  #pgs .spinner .rect3 { -webkit-animation-delay: -1.0s; animation-delay: -1.0s; }                  #pgs .spinner .rect4 { -webkit-animation-delay: -0.9s; animation-delay: -0.9s; }                  #pgs .spinner .rect5 { -webkit-animation-delay: -0.8s; animation-delay: -0.8s; }                    @-webkit-keyframes sk-stretchdelay { 0%, 40%, 100% { -webkit-transform: scaleY(0.4) } 20% { -webkit-transform: scaleY(1.0) } }                    @keyframes sk-stretchdelay { 0%, 40%, 100% { transform: scaleY(0.4); -webkit-transform: scaleY(0.4); }  20% { transform: scaleY(1.0); -webkit-transform: scaleY(1.0); } }",spinnerTemplate:'<div class="spinnerWrapper">                      <span>Please wait...</span>                      <div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div>',adviceUrl:"https://drwaiqwbfbh5tnyqhfr7dknnei.appsync-api.us-east-1.amazonaws.com/graphql"},w={settings:b,setMessageListener:t,loadWidgets:e,logError:o},A={orgSchema:"{       description       ein       guid       location       name       slug       tagline       attrs {         alpha_orgs         avatar_image_url         brand_color_primary         brand_color_secondary         description         emailCollectionDisclaimer         ex_header_bg_color         ex_image_url         footer_appeal         header_image_url         isMedia         mailing_list_id         parent_org         pgm_action_display_text         pgm_action_flex         pgm_action_hide_on_fallback         pgm_action_kill         pgm_center_button         pgm_ga_tracking_id         pgm_location         pgm_logo_svg         pgs_action_fallback_text         root_domain_list         sponsor_url         trackingPixel         video_url         widgets_start_as_buttons       }     }",campaignSchema:"{       content {         call_to_action         customButtonImage         customChatScript         customEmailTemplate         description         donation_text         landingQuestion         ga_tracking_id         pgmActions         pgm_widget_type         pgm_hide         socialOverrides         tagline         use_video_learn_more         video_url       }       name       guid       slug     }",tagSchema:"{       content {         call_to_action         description         impact         pgmActions         tagline       }       value       guid       slug     }"},x=[];return w}),t.define("vendor/domReady",[],function(){"use strict";function t(t){var e;for(e=0;e<t.length;e+=1)t[e](c)}function e(){var e=d;u&&e.length&&(d=[],t(e))}function n(){u||(u=!0,a&&clearInterval(a),e())}function r(t){return u?t(c):d.push(t),r}var i,o,a,s="undefined"!=typeof window&&window.document,u=!s,c=s?document:null,d=[];if(s){if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(window.attachEvent){window.attachEvent("onload",n),o=document.createElement("div");try{i=null===window.frameElement}catch(l){}o.doScroll&&i&&window.external&&(a=setInterval(function(){try{o.doScroll(),n()}catch(t){}},30))}"complete"===document.readyState&&n()}return r.version="2.0.1",r.load=function(t,e,n,i){i.isBuild?n(null):r(n)},r}),t.require(["core","vendor/domReady"],function(t,e){t.setMessageListener(),t.loadWidgets(document),e(function(){t.loadWidgets(document)})}),t.define("dpg",function(){})}();